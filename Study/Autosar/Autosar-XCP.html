<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Autosar | Damogu WorkStation</title>
    <meta name="generator" content="VuePress 1.7.0">
    <link rel="icon" href="/vuepressblog/images/m-todo.ico">
    <meta name="description" content="This is a blog of Damogu">
    
    <link rel="preload" href="/vuepressblog/assets/css/0.styles.e3f0a19d.css" as="style"><link rel="preload" href="/vuepressblog/assets/js/app.cc56b176.js" as="script"><link rel="preload" href="/vuepressblog/assets/js/2.4bc8db0f.js" as="script"><link rel="preload" href="/vuepressblog/assets/js/14.5f637c07.js" as="script"><link rel="prefetch" href="/vuepressblog/assets/js/10.81eaad4d.js"><link rel="prefetch" href="/vuepressblog/assets/js/11.50899d73.js"><link rel="prefetch" href="/vuepressblog/assets/js/12.e3e953e0.js"><link rel="prefetch" href="/vuepressblog/assets/js/13.f72c0159.js"><link rel="prefetch" href="/vuepressblog/assets/js/15.f22397a4.js"><link rel="prefetch" href="/vuepressblog/assets/js/16.c3acba76.js"><link rel="prefetch" href="/vuepressblog/assets/js/17.1814e1b9.js"><link rel="prefetch" href="/vuepressblog/assets/js/18.ec35380e.js"><link rel="prefetch" href="/vuepressblog/assets/js/3.fd2055f7.js"><link rel="prefetch" href="/vuepressblog/assets/js/4.c669a65d.js"><link rel="prefetch" href="/vuepressblog/assets/js/5.8481a9a9.js"><link rel="prefetch" href="/vuepressblog/assets/js/6.39a81eb4.js"><link rel="prefetch" href="/vuepressblog/assets/js/7.db76f04d.js"><link rel="prefetch" href="/vuepressblog/assets/js/8.4dd14e98.js"><link rel="prefetch" href="/vuepressblog/assets/js/9.51c9d6b2.js">
    <link rel="stylesheet" href="/vuepressblog/assets/css/0.styles.e3f0a19d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepressblog/" class="home-link router-link-active"><img src="/vuepressblog/assets/img/barlogo.png" alt="Damogu WorkStation" class="logo"> <span class="site-name can-hide">Damogu WorkStation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepressblog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/vuepressblog/Software/" class="nav-link">
  软件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="教程" class="dropdown-title"><span class="title">教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="教程" class="mobile-dropdown-title"><span class="title">教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressblog/Tutorials/windows/" class="nav-link">
  windwos
</a></li><li class="dropdown-item"><!----> <a href="/vuepressblog/Tutorials/pcan/" class="nav-link">
  pcan
</a></li></ul></div></div><div class="nav-item"><a href="/vuepressblog/Study/" class="nav-link router-link-active">
  学习
</a></div><div class="nav-item"><a href="/vuepressblog/Contact/" class="nav-link">
  联系
</a></div><div class="nav-item"><a href="https://blog.csdn.net/qq_33704787" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepressblog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/vuepressblog/Software/" class="nav-link">
  软件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="教程" class="dropdown-title"><span class="title">教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="教程" class="mobile-dropdown-title"><span class="title">教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressblog/Tutorials/windows/" class="nav-link">
  windwos
</a></li><li class="dropdown-item"><!----> <a href="/vuepressblog/Tutorials/pcan/" class="nav-link">
  pcan
</a></li></ul></div></div><div class="nav-item"><a href="/vuepressblog/Study/" class="nav-link router-link-active">
  学习
</a></div><div class="nav-item"><a href="/vuepressblog/Contact/" class="nav-link">
  联系
</a></div><div class="nav-item"><a href="https://blog.csdn.net/qq_33704787" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Autosar</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepressblog/Study/Autosar/Autosar-XCP.html#_1代码" class="sidebar-link">1代码</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepressblog/Study/Autosar/Autosar-XCP.html#_2通信" class="sidebar-link">2通信</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepressblog/Study/Autosar/Autosar-XCP.html#_3-诊断" class="sidebar-link">3.诊断</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepressblog/Study/Autosar/Autosar-XCP.html#_4-配置" class="sidebar-link">4.配置</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="autosar"><a href="#autosar" class="header-anchor">#</a> Autosar</h1> <hr> <blockquote><p>Recorder：liuwanqiang	20201013</p></blockquote> <h2 id="_1代码"><a href="#_1代码" class="header-anchor">#</a> 1代码</h2> <ul><li>核心代码</li></ul> <blockquote><p>核心代码是不动的，如果因项目不同，改变的是配置代码</p></blockquote> <ul><li>配置代码</li></ul> <blockquote><p>配置代码是由配置工具，配置生成的</p></blockquote> <h2 id="_2通信"><a href="#_2通信" class="header-anchor">#</a> 2通信</h2> <p>通信CAN::Canif -&gt;COM::PudR-&gt;COM::Com</p> <p>诊断CAN::Canif-&gt;CAN::CanTp-&gt;COM::PduR-&gt;DIAG::DCM</p> <blockquote><p>收到报文后，经过一系列接受到达DCM，DCM判断自己是否处于空闲状态，如果是，那么就接受，否则丢弃该帧</p></blockquote> <p>CAN::Canif</p> <blockquote><p>长度检查：&gt;8以后传给CanTp解包</p> <p>​				  &lt;8给PduR，如果不是网络管理，给Com</p></blockquote> <p>CAN::CanTp</p> <blockquote><p>长报文的拆包和解包，针对诊断报文</p></blockquote> <p>COM::Com</p> <blockquote><p>信号拆包，比如收到通信信号，拆包，收到短报文以后，比如收到一个信号8字节，把每一个字节解析出来，信号解析</p></blockquote> <blockquote><p>不能做数据转换，解析出来的是总线值，物理值。</p></blockquote> <blockquote><p>超时时间：Com收到后就直接置位、收不到就超时，每个报文都有单独的时间确认接口</p></blockquote> <p>DIAG::Dem</p> <blockquote><p>（故障）超时恢复</p></blockquote> <p>诊断外发：</p> <blockquote><p>DIAG::DCM告诉COM::PduR要发数据，告诉CAN::CanTp</p> <p>CAN::Cantp找PduR要数据，COM::PduR找DIAG::DCM要数据，当DIAG::DCM把数据给了以后，CanTp就发送。</p></blockquote> <p>CAN::CanSM</p> <blockquote><p>状态管理，通信开始时候就已经将你的CAN状态设置为启动或者休眠状态</p></blockquote> <p>CAN::CanNM</p> <blockquote><p>CAN网络管理：</p> <p>CAN间接网络管理：</p> <p>CAN直接网络管理（OSEK）：</p></blockquote> <blockquote><p>配置网络管理需要考虑报文滤波：底层CAN驱动配置，确保掩码能保证网络管理报文能够收到。确保不被过滤到</p></blockquote> <blockquote><p>总线收到网络管理报文比如：0x400，底层驱动收到后给到Canif，当Canif收到后会给CanNM，然后收到报文后会启动一个时间参数，与总线上其余控制器同步进入休眠状态</p></blockquote> <h2 id="_3-诊断"><a href="#_3-诊断" class="header-anchor">#</a> 3.诊断</h2> <p>Dcm</p> <blockquote></blockquote> <p>Dem</p> <blockquote><p>DTC管理</p></blockquote> <p>Det</p> <blockquote><p>推荐使能，方便调试开发，集成好了以后可以关掉，省下存储空间，但是相当有限</p></blockquote> <blockquote><p>方便调试用，报的错误不是故障，会报那个函数接口出错，哪个模块出错</p></blockquote> <p>Fm（没有的）</p> <blockquote><p>BswM接收来自Dcm的状态，比如28关闭通信，那么BswM调用Com接口，关闭接受，发送</p></blockquote> <h2 id="_4-配置"><a href="#_4-配置" class="header-anchor">#</a> 4.配置</h2> <p>CanTp</p> <blockquote><p>填充字节</p></blockquote> <blockquote><p>填充与否</p></blockquote> <p>Canif</p> <blockquote><p>Busoff快慢恢复</p> <p>busoff恢复不经过应用层，在基础软件完成</p></blockquote> <blockquote><p>关联故障</p></blockquote> <p>PduR</p> <blockquote><p>Pdu dlc</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/vuepressblog/assets/js/app.cc56b176.js" defer></script><script src="/vuepressblog/assets/js/2.4bc8db0f.js" defer></script><script src="/vuepressblog/assets/js/14.5f637c07.js" defer></script>
  </body>
</html>
